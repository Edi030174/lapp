<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
        "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="net.lintasarta.permohonan.dao.TPermohonanDAO">
    <select id="getCountAllTPermohonan" resultType="int">
        select count(*) from T_IDOSS_PERMOHONAN
    </select>

    <select id="getGeneratedID" resultType="int">
        select generate_id('SNI','T_IDOSS_PERMOHONAN','GEN_ID_COL') from dual
    </select>

    <select id="getAllTPermohonan" resultType="tpermohonan">
        select * from T_IDOSS_PERMOHONAN   
    </select>

    <select id="getTPermohonanByTIdossPermohonanId" parameterType="tpermohonan" resultType="tpermohonan">
        select  T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where T_IDOSS_PERMOHONAN_ID = #{t_idoss_permohonan_id}
    </select>
    <select id="getTPermohonanByNikPemohon" parameterType="tpermohonan" resultType="tpermohonan">
        select  T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where NIK_PEMOHON = #{nik_pemohon}
    </select>
    <select id="getTPermohonanByNikDivisi" parameterType="tpermohonan" resultType="tpermohonan">
        select T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where NIK_DIVISI = #{nik_divisi}
    </select>
    <select id="getTPermohonanByNikAsman" parameterType="tpermohonan" resultType="tpermohonan">
        select T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where NIK_ASMAN = #{nik_asman}
    </select>
    <select id="getTPermohonanByNikManager" parameterType="tpermohonan" resultType="tpermohonan">
        select T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where NIK_MANAGER = #{nik_manager}
    </select>
    <select id="getTPermohonanByNikGm" parameterType="tpermohonan" resultType="tpermohonan">
        select T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where NIK_GM = #{nik_gm}
    </select>
    <select id="getTPermohonanByStatusTrackPermohonan" parameterType="tpermohonan" resultType="tpermohonan">
        select T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where STATUS_TRACK_PERMOHONAN = #{status_track_permohonan}
    </select>
    <select id="getTPermohonanByStatusTrackPermohonanAndDampak" parameterType="tpermohonan" resultType="tpermohonan">
        select T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where STATUS_TRACK_PERMOHONAN = #{status_track_permohonan}
        and DAMPAK = #{dampak}
    </select>

    <select id="getTPermohonanByNikPemohonStatus" resultType="tpermohonan">
        select T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where NIK_PEMOHON = #{nik_pemohon} and STATUS_TRACK_PERMOHONAN = #{status_track_permohonan}
    </select>
    <select id="getTPermohonanByNikDivisiStatus" resultType="tpermohonan">
        select T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where NIK_DIVISI = #{nik_divisi} and STATUS_TRACK_PERMOHONAN = #{status_track_permohonan}
    </select>
    <select id="getTPermohonanByNikAsmanStatus" resultType="tpermohonan">
        select T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where NIK_ASMAN = #{nik_asman} and STATUS_TRACK_PERMOHONAN = #{status_track_permohonan}
    </select>
    <select id="getTPermohonanByNikManagerStatus" resultType="tpermohonan">
        select T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where NIK_MANAGER = #{nik_manager} and STATUS_TRACK_PERMOHONAN = #{status_track_permohonan}
    </select>
    <select id="getTPermohonanByNikGmStatus" resultType="tpermohonan">
        select T_IDOSS_PERMOHONAN_ID,
                TGL_PERMOHONAN,
                DAMPAK,
                URGENSI,
                TARGET_MULAI_DIGUNAKAN,
                DETAIL_PERMOHONAN,
                LAMPIRAN,
                STATUS_TRACK_PERMOHONAN,
                NIK_PEMOHON,
                NAMA_PEMOHON,
                BAGIAN_PEMOHON,
                NIK_ASMAN,
                NAMA_ASMAN,
                ASMAN,
                NIK_MANAGER,
                NAMA_MANAGER,
                NIK_GM,
                NAMA_GM,
                TYPE_PERMOHONAN,
                LAIN_LAIN_DESC,
                UPDATED_PEMOHON,
                UPDATED_DIVISI,
                UPDATED_ASMAN,
                UPDATED_MANAGER,
                UPDATED_GM,
                CREATED_DATE,
                CREATED_USER,
                UPDATED_DATE,
                UPDATED_USER,
                CATATAN_MANAGER,
                CATATAN_GM,
                GEN_ID_COL
        from T_IDOSS_PERMOHONAN
        where NIK_GM = #{nik_gm} and STATUS_TRACK_PERMOHONAN = #{status_track_permohonan}
    </select>

    <insert id="createTPermohonan" parameterType="tpermohonan">
        insert into SNI.T_IDOSS_PERMOHONAN(
        T_IDOSS_PERMOHONAN_ID,
        TGL_PERMOHONAN,
        DAMPAK,
        URGENSI,
        TARGET_MULAI_DIGUNAKAN,
        DETAIL_PERMOHONAN,
        LAMPIRAN,
        STATUS_TRACK_PERMOHONAN,
        NIK_PEMOHON,
        NAMA_PEMOHON,
        BAGIAN_PEMOHON,
        NIK_ASMAN,
        NAMA_ASMAN,
        NIK_MANAGER,
        NAMA_MANAGER,
        NIK_GM,
        NAMA_GM,
        TYPE_PERMOHONAN,
        LAIN_LAIN_DESC,
        UPDATED_PEMOHON,
        UPDATED_DIVISI,
        UPDATED_ASMAN,
        UPDATED_MANAGER,
        UPDATED_GM,
        CREATED_DATE,
        CREATED_USER,
        UPDATED_DATE,
        UPDATED_USER,
        CATATAN_MANAGER,
        CATATAN_GM,
        GEN_ID_COL
        )
        values(
        #{t_idoss_permohonan_id},
        #{tgl_permohonan,jdbcType=TIMESTAMP},
        #{dampak,jdbcType=VARCHAR},
        #{urgensi,jdbcType=VARCHAR},
        #{target_mulai_digunakan,jdbcType=TIMESTAMP},
        #{detail_permohonan,jdbcType=VARCHAR},
        #{lampiran,jdbcType=VARCHAR},
        #{status_track_permohonan},
        #{nik_pemohon},
        #{nama_pemohon,jdbcType=VARCHAR},
        #{bagian_pemohon,jdbcType=VARCHAR},
        #{nik_asman,jdbcType=VARCHAR},
        #{nama_asman,jdbcType=VARCHAR},
        #{nik_manager,jdbcType=VARCHAR},
        #{nama_manager,jdbcType=VARCHAR},
        #{nik_gm,jdbcType=VARCHAR},
        #{nama_gm,jdbcType=VARCHAR},
        #{type_permohonan,jdbcType=VARCHAR},
        #{lain_lain,jdbcType=VARCHAR},
        #{updated_pemohon,jdbcType=TIMESTAMP},
        #{updated_divisi,jdbcType=TIMESTAMP},
        #{updated_asman,jdbcType=TIMESTAMP},
        #{updated_manager,jdbcType=TIMESTAMP},
        #{updated_gm,jdbcType=TIMESTAMP},
        #{created_date},
        #{created_user},
        #{updated_date},
        #{updated_user},
        #{catatan_manager,jdbcType=VARCHAR},
        #{catatan_gm,jdbcType=VARCHAR},
        #{gen_id_col}
        )
    </insert>

    <update id="saveOrUpdateTPermohonan" parameterType="tpermohonan">
        update SNI.T_IDOSS_PERMOHONAN
        set
        TGL_PERMOHONAN=#{tgl_permohonan,jdbcType=TIMESTAMP},
        DAMPAK=#{dampak,jdbcType=VARCHAR},
        URGENSI=#{urgensi,jdbcType=VARCHAR},
        TARGET_MULAI_DIGUNAKAN=#{target_mulai_digunakan,jdbcType=TIMESTAMP},
        DETAIL_PERMOHONAN=#{detail_permohonan,jdbcType=VARCHAR},
        LAMPIRAN=#{lampiran,jdbcType=VARCHAR},
        STATUS_TRACK_PERMOHONAN=#{status_track_permohonan,jdbcType=VARCHAR},
        NIK_PEMOHON=#{nik_pemohon,jdbcType=VARCHAR},
        NAMA_PEMOHON=#{nama_pemohon,jdbcType=VARCHAR},
        BAGIAN_PEMOHON=#{bagian_pemohon,jdbcType=VARCHAR},
        NIK_ASMAN=#{nik_asman,jdbcType=VARCHAR},
        NAMA_ASMAN=#{nama_asman,jdbcType=VARCHAR},
        NIK_MANAGER=#{nik_manager,jdbcType=VARCHAR},
        NAMA_MANAGER=#{nama_manager,jdbcType=VARCHAR},
        NIK_GM=#{nik_gm,jdbcType=VARCHAR},
        NAMA_GM=#{nama_gm,jdbcType=VARCHAR},
        TYPE_PERMOHONAN=#{type_permohonan,jdbcType=VARCHAR},
        LAIN_LAIN_DESC=#{lain_lain,jdbcType=VARCHAR},
        UPDATED_PEMOHON=#{updated_pemohon,jdbcType=TIMESTAMP},
        UPDATED_DIVISI=#{updated_divisi,jdbcType=TIMESTAMP},
        UPDATED_ASMAN=#{updated_asman,jdbcType=TIMESTAMP},
        UPDATED_MANAGER=#{updated_manager,jdbcType=TIMESTAMP},
        UPDATED_GM=#{updated_gm,jdbcType=TIMESTAMP},
        CREATED_DATE=#{created_date,jdbcType=TIMESTAMP},
        CREATED_USER=#{created_user,jdbcType=VARCHAR},
        UPDATED_DATE=#{updated_date,jdbcType=TIMESTAMP},
        UPDATED_USER=#{updated_user,jdbcType=VARCHAR},
        CATATAN_MANAGER=#{catatan_manager,jdbcType=VARCHAR},
        CATATAN_GM=#{catatan_gm,jdbcType=VARCHAR}
        where T_IDOSS_PERMOHONAN_ID=#{t_idoss_permohonan_id}
    </update>

    <select id="getManager" parameterType="string" resultType="string">
        select hr.get_pic(5,#{employeeNo}) from dual
    </select>
    <!--<select id="getManager" parameterType="string" resultType="tpermohonan">-->
        <!--select * from table(cast(f_pipe_idoss_employee(#{employeeNo}) as pipe_idoss_employee))-->
    <!--</select>-->

    <select id="getTPermohonanByStatusAndNikManager" parameterType="tpermohonan" resultType="tpermohonan">
        select * from T_IDOSS_PERMOHONAN where nik_manager = #{nik_manager} and status_track_permohonan = #{status_track_permohonan}
    </select>
    <select id="getTPermohonanByStatusAndNikGM" parameterType="tpermohonan" resultType="tpermohonan">
        select * from T_IDOSS_PERMOHONAN where nik_gm = #{nik_gm} and status_track_permohonan = #{status_track_permohonan}
    </select>
</mapper>